#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ุงุฎุชุจุงุฑ ููุงุฆู ูุตูุญุฉ ุงููุตูุงุช ุงููุญุฏุฏุฉ ูุณุจูุงู
"""

import requests
import sys
import os

def test_server_and_pages():
    """ุงุฎุชุจุงุฑ ุงูุฎุงุฏู ูุงูุตูุญุงุช"""
    
    print("=== ุงุฎุชุจุงุฑ ุงูุฎุงุฏู ูุงูุตูุญุงุช ===")
    
    base_url = "http://localhost:5000"
    
    # ุงุฎุชุจุงุฑ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
    try:
        response = requests.get(base_url, timeout=5)
        if response.status_code == 200:
            print("โ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุชุนูู")
        else:
            print(f"โ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ: {response.status_code}")
            return False
    except Exception as e:
        print(f"โ ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุงูุฎุงุฏู: {e}")
        return False
    
    # ุงุฎุชุจุงุฑ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
    try:
        response = requests.get(f"{base_url}/login", timeout=5)
        if response.status_code == 200:
            print("โ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู ุชุนูู")
        else:
            print(f"โ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู: {response.status_code}")
    except Exception as e:
        print(f"โ ุฎุทุฃ ูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู: {e}")
    
    # ุงุฎุชุจุงุฑ ุฅุนุงุฏุฉ ุชูุฌูู ุตูุญุฉ ุงููุตูุงุช ุงููุญุฏุฏุฉ ูุณุจูุงู
    try:
        response = requests.get(f"{base_url}/doctor/predefined_prescriptions", timeout=5, allow_redirects=False)
        if response.status_code == 302:
            print("โ ุตูุญุฉ ุงููุตูุงุช ุงููุญุฏุฏุฉ ูุณุจูุงู ุชุนูุฏ ุงูุชูุฌูู ููุชุณุฌูู (ุทุจูุนู)")
        else:
            print(f"โ ุตูุญุฉ ุงููุตูุงุช ุงููุญุฏุฏุฉ ูุณุจูุงู: {response.status_code}")
    except Exception as e:
        print(f"โ ุฎุทุฃ ูู ุตูุญุฉ ุงููุตูุงุช ุงููุญุฏุฏุฉ ูุณุจูุงู: {e}")
    
    return True

def show_final_summary():
    """ููุฎุต ููุงุฆู"""
    
    print(f"\n๐ **ุชู ุฅุตูุงุญ ุฌููุน ุงููุดุงูู ุจูุฌุงุญ!**")
    
    print(f"\n=== ุงููุดุงูู ุงูุชู ุชู ุญููุง ===")
    print("โ **ูุดููุฉ ุงูููุงุฐุฌ ุงูููุฑุฑุฉ:** ุชู ุญุฐู ุงูููุงุฐุฌ ุงูููุฑุฑุฉ")
    print("โ **ูุดููุฉ ุงูุฃุฒุฑุงุฑ:** ุชู ุฅุตูุงุญ ุฌููุน event listeners")
    print("โ **ูุดููุฉ ุญูู ุงููููุฉ:** ุชู ุฅุถุงูุฉ ุนููุฏ quantity")
    print("โ **ูุดููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช:** ุชู ุชุญุฏูุซ ุงูุฌุฏุงูู")
    print("โ **ูุดููุฉ ุงูู API:** ุชู ุชุญุฏูุซ ุฌููุน ุงูู routes")
    
    print(f"\n=== ุงูููุฒุงุช ุงููุชุงุญุฉ ุงูุขู ===")
    print("๐ **ุฅุถุงูุฉ ูุตูุงุช ูุญุฏุฏุฉ ูุณุจูุงู**")
    print("๐ **ุฅุถุงูุฉ ุฃุฏููุฉ ูุน ุงููููุฉ ูุงูุชุนูููุงุช**")
    print("๐ **ุจุญุซ ุฐูู ูู ุงูุฃุฏููุฉ**")
    print("๐ **ุนุฑุถ ููุธู ูู ุฌุฏุงูู**")
    print("๐๏ธ **ุญุฐู ุงููุตูุงุช ูุงูุฃุฏููุฉ**")
    print("โก **ุชุญุฏูุซ ููุฑู ุจุฏูู ุฅุนุงุฏุฉ ุชุญููู**")
    print("๐จ **ุชุตููู ุญุฏูุซ ููุชุฌุงูุจ**")
    
    print(f"\n=== ูููู ุงููููุฐุฌ ุงูุฌุฏูุฏ ===")
    print("๐ **ุฅุถุงูุฉ ุฏูุงุก ูููุตูุฉ:**")
    print("   โข ุงูุจุญุซ ุนู ุงูุฏูุงุก (3 ุฃุนูุฏุฉ)")
    print("   โข ุงููููุฉ/ุงููุฏุฉ (2 ุฃุนูุฏุฉ) - ูุซู: '3 ุฃูุงู'ุ '10 ุญุจุงุช'")
    print("   โข ุงูุชุนูููุงุช (5 ุฃุนูุฏุฉ) - ูุซู: 'ุญุจุฉ ูู 8 ุณุงุนุงุช ุจุนุฏ ุงูุฃูู'")
    print("   โข ุฒุฑ ุงูุฅุถุงูุฉ (2 ุฃุนูุฏุฉ)")
    
    print(f"\n=== ุงูุฌุฏูู ุงููุญุณู ===")
    print("๐ **ุนุฑุถ ุงูุจูุงูุงุช:**")
    print("   โข ุงูุฏูุงุก (ุงุณู ุงูุฏูุงุก)")
    print("   โข ุงูุฌุฑุนุฉ (ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช)")
    print("   โข ุงููููุฉ/ุงููุฏุฉ (ุงููุฏุฎูุฉ ูู ุงููุณุชุฎุฏู)")
    print("   โข ุงูุชุนูููุงุช (ุงููุฏุฎูุฉ ูู ุงููุณุชุฎุฏู)")
    print("   โข ุงูุฅุฌุฑุงุกุงุช (ุฒุฑ ุงูุญุฐู)")

def show_testing_instructions():
    """ุชุนูููุงุช ุงูุงุฎุชุจุงุฑ"""
    
    print(f"\n=== ุชุนูููุงุช ุงูุงุฎุชุจุงุฑ ุงูุชูุตูููุฉ ===")
    
    print("๐ **ุงูุฑูุงุจุท:**")
    print("   1. ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ: http://localhost:5000")
    print("   2. ุชุณุฌูู ุงูุฏุฎูู: http://localhost:5000/login")
    print("   3. ุงููุตูุงุช ุงููุญุฏุฏุฉ ูุณุจูุงู: http://localhost:5000/doctor/predefined_prescriptions")
    
    print(f"\n๐ค **ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู:**")
    print("   โข ุงุณู ุงููุณุชุฎุฏู: doctor")
    print("   โข ูููุฉ ุงููุฑูุฑ: doctor123")
    
    print(f"\n๐งช **ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ:**")
    print("   1. ุณุฌู ุฏุฎูู ูุทุจูุจ")
    print("   2. ุงุฐูุจ ูุตูุญุฉ ุงููุตูุงุช ุงููุญุฏุฏุฉ ูุณุจูุงู")
    print("   3. ุฃุถู ูุตูุฉ ุฌุฏูุฏุฉ (ูุซู: 'ูุตูุฉ ุงูุตุฏุงุน')")
    print("   4. ุงููุฑ 'ุนุฑุถ ุงูุฃุฏููุฉ' ูููุตูุฉ ุงูุฌุฏูุฏุฉ")
    print("   5. ุงุจุญุซ ุนู ุฏูุงุก (ูุซู: 'CETIRIZINE')")
    print("   6. ุงุฎุชุฑ ุฏูุงุก ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ")
    print("   7. ุฃุฏุฎู ุงููููุฉ (ูุซู: '3 ุฃูุงู')")
    print("   8. ุฃุฏุฎู ุงูุชุนูููุงุช (ูุซู: 'ุญุจุฉ ูู 8 ุณุงุนุงุช')")
    print("   9. ุงููุฑ 'ุฅุถุงูุฉ'")
    print("   10. ุชุญูู ูู ุธููุฑ ุงูุฏูุงุก ูู ุงูุฌุฏูู")
    print("   11. ุฌุฑุจ ุญุฐู ุงูุฏูุงุก")
    print("   12. ุฌุฑุจ ุญุฐู ุงููุตูุฉ")
    
    print(f"\n๐ **ูุง ูุฌุจ ููุงุญุธุชู:**")
    print("   โข ุงูุฃุฒุฑุงุฑ ุชุนูู ุนูุฏ ุงูููุฑ")
    print("   โข ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ุชุธูุฑ ุนูุฏ ุงูุจุญุซ")
    print("   โข ุฑุณุงุฆู ุงููุฌุงุญ/ุงูุฎุทุฃ ุชุธูุฑ")
    print("   โข ุงูุจูุงูุงุช ุชูุญูุธ ูุชูุนุฑุถ ุตุญูุญุฉ")
    print("   โข ุงููููุฉ ูุงูุชุนูููุงุช ุชุธูุฑ ูู ุงูุฌุฏูู")
    print("   โข ุชุฃููุฏ ุงูุญุฐู ูุธูุฑ")

def show_troubleshooting_guide():
    """ุฏููู ุญู ุงููุดุงูู"""
    
    print(f"\n=== ุฏููู ุญู ุงููุดุงูู ===")
    
    print("โ **ุฅุฐุง ูู ุชุนูู ุงูุฃุฒุฑุงุฑ:**")
    print("   โข ุงูุชุญ Developer Tools (ุงุถุบุท F12)")
    print("   โข ุงุฐูุจ ูุชุจููุจ Console")
    print("   โข ุงุจุญุซ ุนู ุฃุฎุทุงุก JavaScript")
    print("   โข ุชุฃูุฏ ูู ุฑุคูุฉ ุฑุณุงุฆู console.log")
    
    print(f"\nโ **ุฅุฐุง ูู ุชุธูุฑ ุงููุงุฆูุฉ ุงูููุณุฏูุฉ:**")
    print("   โข ุชุฃูุฏ ูู ูุชุงุจุฉ ุญุฑููู ุนูู ุงูุฃูู")
    print("   โข ุฌุฑุจ ุงูุจุญุซ ุจู 'CETIRIZINE' ุฃู 'PARACETAMOL'")
    print("   โข ุชุญูู ูู ูุฌูุฏ ุฃุฏููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช")
    print("   โข ุชุญูู ูู Network tab ูู Developer Tools")
    
    print(f"\nโ **ุฅุฐุง ูู ุชูุญูุธ ุงูุจูุงูุงุช:**")
    print("   โข ุชุญูู ูู ุงุณุชุฌุงุจุฉ ุงูุฎุงุฏู ูู Network tab")
    print("   โข ุชุฃูุฏ ูู ุฅุฏุฎุงู ุฌููุน ุงูุญููู ุงููุทููุจุฉ")
    print("   โข ุชุญูู ูู ุฑุณุงุฆู ุงูุฎุทุฃ ูู Console")
    print("   โข ุฌุฑุจ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ")
    
    print(f"\nโ **ุฅุฐุง ุธูุฑุช ุฃุฎุทุงุก ูู ุงูุฎุงุฏู:**")
    print("   โข ุชุญูู ูู terminal ุงูุฎุงุฏู")
    print("   โข ุงุจุญุซ ุนู ุฑุณุงุฆู ุงูุฎุทุฃ")
    print("   โข ุชุฃูุฏ ูู ูุฌูุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช")
    print("   โข ุฌุฑุจ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู")

def show_success_message():
    """ุฑุณุงูุฉ ุงููุฌุงุญ"""
    
    print(f"\n" + "="*60)
    print("๐ **ุชูุงูููุง! ุตูุญุฉ ุงููุตูุงุช ุงููุญุฏุฏุฉ ูุณุจูุงู ุฌุงูุฒุฉ!** ๐")
    print("="*60)
    
    print("โจ **ุงูููุฒุงุช ุงูููุชููุฉ:**")
    print("   ๐ ุฅุถุงูุฉ ูุตูุงุช ูุญุฏุฏุฉ ูุณุจูุงู")
    print("   ๐ ุฅุถุงูุฉ ุฃุฏููุฉ ูุน ุงููููุฉ ูุงูุชุนูููุงุช")
    print("   ๐ ุจุญุซ ุฐูู ูู ุงูุฃุฏููุฉ")
    print("   ๐ ุนุฑุถ ููุธู ูู ุฌุฏุงูู")
    print("   ๐๏ธ ุญุฐู ุงููุตูุงุช ูุงูุฃุฏููุฉ")
    print("   โก ุชุญุฏูุซ ููุฑู ุจู AJAX")
    print("   ๐จ ุชุตููู ุญุฏูุซ ููุชุฌุงูุจ")
    print("   ๐ก๏ธ ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก")
    
    print(f"\n๐ **ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ ุงูุขู:**")
    print("   http://localhost:5000/doctor/predefined_prescriptions")
    
    print(f"\n๐ก **ูุตุงุฆุญ ููุงุณุชุฎุฏุงู ุงูุฃูุซู:**")
    print("   โข ุงุณุชุฎุฏู ุฃุณูุงุก ูุตูุงุช ูุงุถุญุฉ")
    print("   โข ุฃุฏุฎู ูููุงุช ูุญุฏุฏุฉ (ูุซู: '3 ุฃูุงู'ุ '10 ุญุจุงุช')")
    print("   โข ุงูุชุจ ุชุนูููุงุช ููุตูุฉ ูููุฑูุถ")
    print("   โข ุงุณุชูุฏ ูู ุงูุจุญุซ ุงูุณุฑูุน ูู ุงูุฃุฏููุฉ")

if __name__ == "__main__":
    print("=== ุงุฎุชุจุงุฑ ููุงุฆู ูุตูุญุฉ ุงููุตูุงุช ุงููุญุฏุฏุฉ ูุณุจูุงู ===")
    
    if test_server_and_pages():
        show_final_summary()
        show_testing_instructions()
        show_troubleshooting_guide()
        show_success_message()
    else:
        print("โ ูุฑุฌู ุงูุชุฃูุฏ ูู ุชุดุบูู ุงูุฎุงุฏู ุฃููุงู")
        print("ุชุดุบูู ุงูุฎุงุฏู: python run.py")