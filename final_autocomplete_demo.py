#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ุนุฑุถ ููุงุฆู ูุฎุงุตูุฉ ุงูุจุญุซ ุงูุชููุงุฆู ุงููุญุณููุฉ
"""

import webbrowser
import time
import subprocess
import sys

def demo_autocomplete_search():
    """ุนุฑุถ ุชูุงุนูู ูุฎุงุตูุฉ ุงูุจุญุซ ุงูุชููุงุฆู"""
    
    print("๐ ูุฑุญุจุงู ุจู ูู ุงูุนุฑุถ ุงูุชูุถูุญู ูุฎุงุตูุฉ ุงูุจุญุซ ุงูุชููุงุฆู ุงููุญุณููุฉ!")
    print("=" * 70)
    
    print("\n๐ ุงูุฎุตุงุฆุต ุงูุฌุฏูุฏุฉ:")
    features = [
        "๐ ุงูุจุญุซ ุงูููุฑู ูู ุฃูู ุญุฑู",
        "๐ ูุงุฆูุฉ ููุณุฏูุฉ ุฃูููุฉ ูููุชุงุฆุฌ", 
        "๐ค ุนุฑุถ ุชูุงุตูู ุงููุฑูุถ (ุงูุงุณูุ ุงููุงุชูุ ุงูุนูุฑุ ุงูุฌูุณ)",
        "โจ๏ธ ุงูุชููู ุจุงูุฃุณูู ูุงูุงุฎุชูุงุฑ ุจู Enter",
        "๐จ ุชุตููู ุนุตุฑู ูุน ุชุฃุซูุฑุงุช ุญุฑููุฉ",
        "โก ุฃุฏุงุก ูุญุณูู ูุณุฑุนุฉ ุนุงููุฉ",
        "๐ฏ ุฃุฒุฑุงุฑ ุณุฑูุนุฉ ููุฅุฌุฑุงุกุงุช"
    ]
    
    for feature in features:
        print(f"  {feature}")
    
    print("\n๐ ุฅุญุตุงุฆูุงุช ุงูุชุญุณูู:")
    print("  โข ุชูููู ููุช ุงูุจุญุซ ุฅูู 200ms")
    print("  โข ุฒูุงุฏุฉ ุนุฏุฏ ุงููุฑุถู ููู ุตูุญุฉ ุฅูู 15")  
    print("  โข ุฅุถุงูุฉ ุงูุจุญุซ ูู ุงูุนููุงู")
    print("  โข ุชุญุณูู ูุงุฌูุฉ ุงููุณุชุฎุฏู 100%")
    
    print("\n๐ฏ ุทุฑู ุงูุงุฎุชุจุงุฑ:")
    print("  1. ุงูุจุญุซ ุจุงูุงุณู: ุฌุฑุจ 'ุฃุญูุฏ' ุฃู 'Naim'")
    print("  2. ุงูุจุญุซ ุจุงููุงุชู: ุฌุฑุจ '0778' ุฃู '0123'")
    print("  3. ุงูุจุญุซ ุจุงูุนููุงู: ุฃู ุฌุฒุก ูู ุงูุนููุงู")
    
    # ุนุฑุถ ุงููุณุงุฑุงุช ุงููููุฉ
    print("\n๐ ุงูุฑูุงุจุท ุงููููุฉ:")
    urls = {
        "ุชุณุฌูู ุงูุฏุฎูู": "http://127.0.0.1:5000/login",
        "ููุญุฉ ุชุญูู ุงูุณูุฑุชูุฑ": "http://127.0.0.1:5000/secretary/dashboard/secretary", 
        "ูุงุฆูุฉ ุงููุฑุถู": "http://127.0.0.1:5000/secretary/secretary/patients",
        "API ุงูุจุญุซ": "http://127.0.0.1:5000/secretary/secretary/api/search-patients?term=Naim"
    }
    
    for name, url in urls.items():
        print(f"  ๐ {name}: {url}")
    
    print("\n๐ค ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู:")
    print("  โข ุงููุณุชุฎุฏู: secretary")
    print("  โข ูููุฉ ุงููุฑูุฑ: secretary123")
    
    # ุนุฑุถ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
    print("\n๐๏ธ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ุงููุชุงุญุฉ:")
    print("  โข Naim Younes - 0778197124")
    print("  โข Naim Tahar - 0778197124") 
    print("  โข Naim douaa - 0777777777")
    print("  โข ุฃุญูุฏ ูุญูุฏ - 0123456789")
    print("  โข ูุงููุฒูุฏ...")
    
    print("\n" + "=" * 70)
    
    # ุนุฑุถ ุฎูุงุฑุงุช ูููุณุชุฎุฏู
    while True:
        print("\n๐ฎ ุงุฎุชุฑ ุงูุฅุฌุฑุงุก:")
        print("  1๏ธโฃ  ูุชุญ ุงููุชุตูุญ ูุชุฌุฑุจุฉ ุงูุฎุงุตูุฉ")
        print("  2๏ธโฃ  ุนุฑุถ ุงูููุฏ ุงูุฌุฏูุฏ") 
        print("  3๏ธโฃ  ูุญุต ุญุงูุฉ ุงูุฎุงุฏู")
        print("  4๏ธโฃ  ุฏููู ุงูุงุณุชุฎุฏุงู")
        print("  0๏ธโฃ  ุฎุฑูุฌ")
        
        choice = input("\n๐ข ุงุฎุชุฑ ุฑูู (0-4): ").strip()
        
        if choice == "1":
            open_browser_demo()
        elif choice == "2":
            show_code_overview()
        elif choice == "3":
            check_server_status()
        elif choice == "4":
            show_usage_guide()
        elif choice == "0":
            print("\n๐ ุดูุฑุงู ูู! ุงุณุชูุชุน ุจุฎุงุตูุฉ ุงูุจุญุซ ุงูุชููุงุฆู ุงูุฌุฏูุฏุฉ!")
            break
        else:
            print("โ ุงุฎุชูุงุฑ ุบูุฑ ุตุญูุญุ ุญุงูู ูุฑุฉ ุฃุฎุฑู")

def open_browser_demo():
    """ูุชุญ ุงููุชุตูุญ ููุชุฌุฑุจุฉ ุงูุนูููุฉ"""
    print("\n๐ ูุชุญ ุงููุชุตูุญ...")
    login_url = "http://127.0.0.1:5000/login"
    
    try:
        webbrowser.open(login_url)
        print("โ ุชู ูุชุญ ุงููุชุตูุญ!")
        print("\n๐ ุฎุทูุงุช ุงูุชุฌุฑุจุฉ:")
        print("  1. ุณุฌู ุฏุฎูู: secretary / secretary123")
        print("  2. ุงุฐูุจ ุฅูู 'ูุงุฆูุฉ ุงููุฑุถู'")
        print("  3. ุงุจุฏุฃ ุงููุชุงุจุฉ ูู ุญูู ุงูุจุญุซ")
        print("  4. ุดุงูุฏ ุงูุจุญุซ ุงูุชููุงุฆู!")
    except Exception as e:
        print(f"โ ุฎุทุฃ ูู ูุชุญ ุงููุชุตูุญ: {e}")
        print("ูุฑุฌู ูุชุญ ุงููุชุตูุญ ูุฏููุงู ูุงูุฐูุงุจ ุฅูู:")
        print(f"  {login_url}")

def show_code_overview():
    """ุนุฑุถ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูููุฏ ุงูุฌุฏูุฏ"""
    print("\n๐ป ูุธุฑุฉ ุนูู ุงูููุฏ ุงูุฌุฏูุฏ:")
    print("=" * 50)
    
    print("\n๐ ุงููููุงุช ุงููุญุฏูุซุฉ:")
    files = [
        ("routes.py", "ุชุญุณูู API ุงูุจุญุซ + ุฅุถุงูุฉ endpoints ุฌุฏูุฏุฉ"),
        ("patients.html", "ุฅุนุงุฏุฉ ุชุตููู ูุงูู ูููุงุฌูุฉ"),
        ("JavaScript", "ูุธุงู ุจุญุซ ุชููุงุฆู ูุชูุฏู"),
        ("CSS", "ุชุตููู ุนุตุฑู ูุน ุชุฃุซูุฑุงุช ุญุฑููุฉ")
    ]
    
    for file, desc in files:
        print(f"  ๐ {file}: {desc}")
    
    print("\n๐ง ุงูุชุญุณููุงุช ุงูุชูููุฉ:")
    improvements = [
        "ุงุณุชุฎุฏุงู fetch API ููุทูุจุงุช",
        "debouncing ููุชุญูู ูู ูุนุฏู ุงูุทูุจุงุช",
        "keyboard navigation ูุชูุฏู",
        "error handling ูุญุณูู",
        "responsive design ููุฌูุงู",
        "loading states ูููุณุชุฎุฏู"
    ]
    
    for improvement in improvements:
        print(f"  โก {improvement}")

def check_server_status():
    """ูุญุต ุญุงูุฉ ุงูุฎุงุฏู"""
    print("\n๐ ูุญุต ุญุงูุฉ ุงูุฎุงุฏู...")
    
    import requests
    
    try:
        response = requests.get("http://127.0.0.1:5000", timeout=5)
        if response.status_code == 200:
            print("โ ุงูุฎุงุฏู ูุนูู ุจุดูู ุทุจูุนู")
            
            # ูุญุต ูุณุงุฑ ุงูุจุญุซ
            try:
                search_response = requests.get(
                    "http://127.0.0.1:5000/secretary/secretary/api/search-patients?term=test",
                    timeout=3
                )
                if search_response.status_code in [200, 401, 302]:
                    print("โ API ุงูุจุญุซ ูุชุงุญ")
                else:
                    print(f"โ๏ธ API ุงูุจุญุซ ูุนุทู ุฑูุฒ: {search_response.status_code}")
            except:
                print("โ๏ธ ูุง ูููู ุงููุตูู ูู API ุงูุจุญุซ (ูุฏ ูุญุชุงุฌ ุชุณุฌูู ุฏุฎูู)")
                
        else:
            print(f"โ๏ธ ุงูุฎุงุฏู ูุนุทู ุฑูุฒ: {response.status_code}")
    
    except requests.exceptions.ConnectionError:
        print("โ ุงูุฎุงุฏู ุบูุฑ ูุชุงุญ")
        print("๐ก ุชุฃูุฏ ูู ุชุดุบูู ุงูุฃูุฑ: python run.py")
    except Exception as e:
        print(f"โ ุฎุทุฃ ูู ูุญุต ุงูุฎุงุฏู: {e}")

def show_usage_guide():
    """ุนุฑุถ ุฏููู ุงูุงุณุชุฎุฏุงู ุงูููุตู"""
    print("\n๐ ุฏููู ุงูุงุณุชุฎุฏุงู ุงูููุตู:")
    print("=" * 50)
    
    steps = [
        ("1. ุชุณุฌูู ุงูุฏุฎูู", [
            "ุงูุชุญ http://127.0.0.1:5000/login",
            "ุงูุชุจ: secretary",
            "ูููุฉ ุงููุฑูุฑ: secretary123",
            "ุงููุฑ 'ุชุณุฌูู ุงูุฏุฎูู'"
        ]),
        
        ("2. ุงููุตูู ููุงุฆูุฉ ุงููุฑุถู", [
            "ูู ููุญุฉ ุงูุชุญููุ ุงููุฑ 'ูุงุฆูุฉ ุงููุฑุถู'",
            "ุฃู ุงุฐูุจ ูุจุงุดุฑุฉ ุฅูู /secretary/secretary/patients"
        ]),
        
        ("3. ุงุณุชุฎุฏุงู ุงูุจุญุซ ุงูุชููุงุฆู", [
            "ุงุจุฏุฃ ุงููุชุงุจุฉ ูู ุญูู ุงูุจุญุซ ุงููุจูุฑ",
            "ุณุชุธูุฑ ุงููุชุงุฆุฌ ููุฑุงู ูู ูุงุฆูุฉ ููุณุฏูุฉ",
            "ุงููุฑ ุนูู ุงููุฑูุถ ุงููุทููุจ ุฃู ุงุณุชุฎุฏู ุงูุฃุณูู + Enter"
        ]),
        
        ("4. ุงูุฅุฌุฑุงุกุงุช ุงูุณุฑูุนุฉ", [
            "๐๏ธ ุฃููููุฉ ุงูุนูู: ุนุฑุถ ุชูุงุตูู ุงููุฑูุถ",
            "โ๏ธ ุฃููููุฉ ุงูููู: ุชุนุฏูู ุจูุงูุงุช ุงููุฑูุถ", 
            "๐ซ ุฃููููุฉ ุงูุชุฐูุฑุฉ: ุฅูุดุงุก ุชุฐูุฑุฉ ุงูุชุธุงุฑ"
        ])
    ]
    
    for step_title, step_details in steps:
        print(f"\n{step_title}:")
        for detail in step_details:
            print(f"  โข {detail}")

if __name__ == "__main__":
    demo_autocomplete_search()